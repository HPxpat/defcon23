         TITLE  'hello defcon'
HELLODC  CSECT  
HELLODC  AMODE 31
HELLODC  RMODE ANY
@SETUP   DS    0F
         STM   14,12,12(13)     # save our registers
         LARL  15,@SETUP
         LR    8,15
         USING @SETUP,8        # give us some addressability
         LARL  11,SAVEAREA     # sa address
         ST    13,4(,11)       # save caller's save area
         LR    13,11     
         DS    0H
         BRAS  0,MAIN
FNAME    DC    C'BPX1WRT ' 
         DC    X'0'
MAIN     LARL  0,FNAME
         XR    1,1
         SVC   8
         ST    0,GETENTRY
         L     15,GETENTRY
         CALL  (15),(FD,AMSG,ALET,LEN,RTN_VAL,RTN_COD,RSN_COD),VL
         L     13,4(,11)
         LM    14,12,12(13)    # restore registers
         XR    15,15           # zero return code
         BCR   15,14           # branch to caller
         DS    0F              # constants area
GETENTRY DS    A
         DC    X'00000000'
SAVEAREA DC    X'00000000'
         DC    X'00000000'
         DC    X'00000000'
         DC    X'00000000'
FD       DC    F'1'
AMSG     DC    A(MSG)
MSG      DC    C'Hello Defcon!'
NEW_LINE DC    X'15'
ALET     DC    F'0'
LEN      DC    A(L'MSG+L'NEW_LINE)
RTN_VAL  DC    F'0'
RTN_COD  DC    F'0'
RSN_COD  DC    F'0'
         END   @SETUP
